<section class="bg-main-light p-4 rounded my-3 mx-auto w-75">
  <h1>Register Now:</h1>
  <form [formGroup]="registerForm" (ngSubmit)="getDataForm()">
    <!-- FirstName -->
    <div class="mb-2">
      <label for="fname">First Name</label>
      <input
        #inputFName
        formControlName="firstName"
        type="text"
        id="fname"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('firstName')?.errors &&
          (registerForm.get('firstName')?.touched ||
            inputFName.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('firstName')?.getError('required')">
          First Name is required
        </p>
        <p *ngIf="registerForm.get('firstName')?.getError('minlength')">
          Min length is 3 characters
        </p>
      </div>
    </div>

    <!-- LastName -->
    <div class="mb-2">
      <label for="lname">Last Name</label>
      <input
        #inputLName
        formControlName="lastName"
        type="text"
        id="lname"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('lastName')?.errors &&
          (registerForm.get('lastName')?.touched || inputLName.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('lastName')?.getError('required')">
          Last Name is required
        </p>
        <p *ngIf="registerForm.get('lastName')?.getError('minlength')">
          Min length is 3 characters
        </p>
      </div>
    </div>

    <!-- UserName -->
    <div class="mb-2">
      <label for="uname">Username</label>
      <input
        #inputUName
        formControlName="userName"
        type="text"
        id="uname"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('userName')?.errors &&
          (registerForm.get('userName')?.touched || inputUName.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('userName')?.getError('required')">
          Username is required
        </p>
        <p *ngIf="registerForm.get('userName')?.getError('minlength')">
          Min length is 3 characters
        </p>
        <p *ngIf="registerForm.get('userName')?.getError('maxlength')">
          Max length is 20 characters
        </p>
      </div>
    </div>

    <!-- Email -->
    <div class="mb-2">
      <label for="email">Email</label>
      <input
        #inputEmail
        formControlName="email"
        type="email"
        id="email"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('email')?.errors &&
          (registerForm.get('email')?.touched || inputEmail.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('email')?.getError('required')">
          Email is required
        </p>
        <p *ngIf="registerForm.get('email')?.getError('email')">
          Invalid email format
        </p>
      </div>
    </div>

    <!-- Password -->
    <div class="mb-2">
      <label for="password">Password</label>
      <input
        #inputPassword
        formControlName="password"
        type="password"
        id="password"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('password')?.errors &&
          (registerForm.get('password')?.touched ||
            inputPassword.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('password')?.getError('required')">
          Password is required
        </p>
        <p *ngIf="registerForm.get('password')?.getError('pattern')">
          Password must contain:<br />
          - Minimum 6 characters<br />
          - One uppercase letter<br />
          - One lowercase letter<br />
          - One number<br />
          - One special character<br />
        </p>
      </div>
    </div>

    <!-- ConfirmPassword -->
    <div class="mb-2">
      <label for="confirmPassword">Confirm Password</label>
      <input
        #inputConfirmPassword
        formControlName="confirmPassword"
        type="password"
        id="confirmPassword"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('confirmPassword')?.errors &&
          (registerForm.get('confirmPassword')?.touched ||
            inputConfirmPassword.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('confirmPassword')?.getError('required')">
          Confirm Password is required
        </p>
        <p *ngIf="registerForm.get('confirmPassword')?.getError('mismatch')">
          Passwords do not match
        </p>
      </div>
    </div>

    <!-- Phone -->
    <div class="mb-2">
      <label for="phoneNumber">Phone</label>
      <input
        #inputPhone
        formControlName="phoneNumber"
        type="tel"
        id="phoneNumber"
        class="form-control"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('phoneNumber')?.errors &&
          (registerForm.get('phoneNumber')?.touched || inputPhone.value.length > 0)
        "
      >
        <p *ngIf="registerForm.get('phoneNumber')?.getError('required')">
          Phone number is required
        </p>
        <p *ngIf="registerForm.get('phoneNumber')?.getError('pattern')">
          Enter a valid Egyptian phone number
        </p>
      </div>
    </div>

    <!-- Submit Button -->
    <button class="btn-main ms-auto d-block" [disabled]="registerForm.invalid">
      <i *ngIf="isLoding" class="fas fa-spin fa-spinner"></i>
      Register
    </button>

    <!-- Error Message -->
    <p *ngIf="msgError" class="alert alert-danger">{{ msgError }}</p>
  </form>
</section>
